<!doctype html>
<html class="default no-js">
<head>
	<meta charset="utf-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<title>as-pect</title>
	<meta name="description" content="">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<link rel="stylesheet" href="assets/css/main.css">
</head>
<body>
<header>
	<div class="tsd-page-toolbar">
		<div class="container">
			<div class="table-wrap">
				<div class="table-cell" id="tsd-search" data-index="assets/js/search.js" data-base=".">
					<div class="field">
						<label for="tsd-search-field" class="tsd-widget search no-caption">Search</label>
						<input id="tsd-search-field" type="text" />
					</div>
					<ul class="results">
						<li class="state loading">Preparing search index...</li>
						<li class="state failure">The search index is not available</li>
					</ul>
					<a href="index.html" class="title">as-pect</a>
				</div>
				<div class="table-cell" id="tsd-widgets">
					<div id="tsd-filter">
						<a href="#" class="tsd-widget options no-caption" data-toggle="options">Options</a>
						<div class="tsd-filter-group">
							<div class="tsd-select" id="tsd-filter-visibility">
								<span class="tsd-select-label">All</span>
								<ul class="tsd-select-list">
									<li data-value="public">Public</li>
									<li data-value="protected">Public/Protected</li>
									<li data-value="private" class="selected">All</li>
								</ul>
							</div>
							<input type="checkbox" id="tsd-filter-inherited" checked />
							<label class="tsd-widget" for="tsd-filter-inherited">Inherited</label>
							<input type="checkbox" id="tsd-filter-only-exported" />
							<label class="tsd-widget" for="tsd-filter-only-exported">Only exported</label>
						</div>
					</div>
					<a href="#" class="tsd-widget menu no-caption" data-toggle="menu">Menu</a>
				</div>
			</div>
		</div>
	</div>
	<div class="tsd-page-title">
		<div class="container">
			<ul class="tsd-breadcrumb">
				<li>
					<a href="globals.html">Globals</a>
				</li>
			</ul>
			<h1> as-pect</h1>
		</div>
	</div>
</header>
<div class="container container-main">
	<div class="row">
		<div class="col-8 col-content">
			<div class="tsd-panel tsd-typography">
				<a href="#jtenneras-pect" id="jtenneras-pect" style="color: inherit; text-decoration: none;">
					<h1>jtenner/as-pect</h1>
				</a>
				<p>This packages is a monorepo that contains the cli and the core for the <code>@as-pect</code>
				packages.</p>
				<p><a href="https://greenkeeper.io/"><img src="https://badges.greenkeeper.io/jtenner/as-pect.svg" alt="Greenkeeper badge"></a>
					<a href="https://travis-ci.org/jtenner/as-pect"><img src="https://travis-ci.org/jtenner/as-pect.svg?branch=master" alt="Build Status"></a>
				<a href="https://coveralls.io/github/jtenner/as-pect?branch=master"><img src="https://coveralls.io/repos/github/jtenner/as-pect/badge.svg?branch=master" alt="Coverage Status"></a></p>
				<p>Write your module in AssemblyScript and get blazing fast bootstrapped tests
				with WebAssembly speeds!</p>
				<a href="#table-of-contents" id="table-of-contents" style="color: inherit; text-decoration: none;">
					<h2>Table of contents</h2>
				</a>
				<ol>
					<li><a href="#philosophy">Philosophy</a></li>
					<li><a href="#usage">Usage</a></li>
					<li><a href="#comparisons">Comparisons</a><ul>
							<li><a href="#tobe">toBe</a></li>
							<li><a href="#tostrictequal">toStrictEqual</a></li>
							<li><a href="#toblockequal">toBlockEqual</a></li>
							<li><a href="#tobetruthy-and-tobefalsy">toBeTruthy and toBeFalsy</a></li>
							<li><a href="#tobenan">toBeNaN</a></li>
							<li><a href="#tobefinite">toBeFinite</a></li>
							<li><a href="#tothrow">toThrow</a></li>
							<li><a href="#tobegreaterthan-and-tobelessthan">toBeGreaterThan/toBeLessThan</a>\</li>
							<li><a href="#tobecloseto">toBeCloseTo</a></li>
							<li><a href="#tohavelength">toHaveLength</a></li>
							<li><a href="#tocontain-and-toinclude">toContain</a></li>
							<li><a href="#tocontainequal-and-toincludeequal">toContainEqual</a></li>
						</ul>
					</li>
					<li><a href="#configuration-file">Configuration File</a></li>
					<li><a href="#types-and-tooling">Types And Tooling</a></li>
					<li><a href="#ci-usage">CI Usage</a></li>
					<li><a href="#assemblyscript-compiler-options">AssemblyScript Compiler Options</a></li>
					<li><a href="#reporters">Reporters</a><ul>
							<li><a href="#summaryreporter">SummaryReporter</a></li>
							<li><a href="#verbosereporter">VerboseReporter</a></li>
							<li><a href="#jsonreporter">JSONReporter</a></li>
							<li><a href="#csvreporter">CSVReporter</a></li>
						</ul>
					</li>
					<li><a href="#portability">Portability</a></li>
					<li><a href="#rtrace-and-memory-leaks">RTrace and Memory Leaks</a></li>
					<li><a href="#performance-testing">Performance Testing</a></li>
					<li><a href="#custom-imports-using-cli">Custom Imports Using CLI</a></li>
					<li><a href="#using-as-pect-as-a-package">Using as-pect as a Package</a></li>
					<li><a href="#contributors">Contributors</a></li>
				</ol>
				<a href="#philosophy" id="philosophy" style="color: inherit; text-decoration: none;">
					<h2>Philosophy</h2>
				</a>
				<p>Testing is the first step of every project and you have a responsibility to
					make sure that the software you write works as intended. The <code>as-pect</code> project
					was created to help quickly scaffold and bootstrap AssemblyScript tests so
				that you can be confident in yourself and the software you write.</p>
				<p>One of the goals of this project is 100% portability to <code>jest</code> so that tests
				can be run in two different environments.</p>
				<p>The most important reason why <code>as-pect</code> exists is to set up and bootstrap
					AssemblyScript tests otherwise would be a hastle to new developers. For
					instance, the following steps need to be compelted for each individual test
				module.</p>
				<ol>
					<li>Create a set of testing primitives or rely on <code>assert()</code> to validate module state</li>
					<li>Compile the module itself</li>
					<li>Bootstrap imports</li>
					<li>Write tests</li>
					<li>Log test output</li>
				</ol>
				<p>This process alone could take hours of your time, and <code>as-pect</code> covers this need
				for testing AssemblyScript modules by simply being an <code>npm install</code> away.</p>
				<a href="#usage" id="usage" style="color: inherit; text-decoration: none;">
					<h2>Usage</h2>
				</a>
				<p>To install <code>as-pect</code>, install the latest version(s) from npm.</p>
				<pre><code>$ <span class="hljs-built_in">npm</span> install @as-pect/cli assemblyscript/assemblyscript</code></pre><p>To initialize a test suite, run <code>npx asp --init</code>. It will create the following
				folders and files.</p>
				<pre><code><span class="hljs-meta">$</span> <span class="hljs-string">npx asp --init</span>
<span class="hljs-comment">
# It will create the following folders if they don't exist</span>
<span class="hljs-attr">C</span> <span class="hljs-string">./assembly/</span>
<span class="hljs-attr">C</span> <span class="hljs-string">./assembly/__tests__/</span>
<span class="hljs-comment">
# The as-pect types file will be created here if it doesn't exist</span>
<span class="hljs-attr">C</span> <span class="hljs-string">./assembly/__tests__/as-pect.d.ts</span>
<span class="hljs-comment">
# An example test file will be created here if the __tests__ folder does not exist</span>
<span class="hljs-attr">C</span> <span class="hljs-string">./assembly/__tests__/example.spec.ts</span>
<span class="hljs-comment">
# The default configuration file will be created here if it doesn't exist</span>
<span class="hljs-attr">C</span> <span class="hljs-string">./as-pect.config.js</span></code></pre><p>If you want <code>asp</code>&#39;s boilerplate located somewhere other than in <code>assembly/</code>,
					you can move it yourself, and update <code>as-pect.config.js</code> to point to the new
				location accordingly.</p>
				<p>To run <code>as-pect</code>, use the command line: <code>npx asp</code>, or create an npm script.</p>
				<pre><code class="language-json">{
  <span class="hljs-attr">"scripts"</span>: {
    <span class="hljs-attr">"test"</span>: <span class="hljs-string">"asp"</span>
  }
}</code></pre>
				<p>The command line defaults to using <code>./aspect.config.js</code>, otherwise you can
				specify all the configuration options using the command line interface.</p>
				<p>To change the location of the as-pect configuration, use the <code>--config</code> option.</p>
				<pre><code>$ npx asp --<span class="hljs-built_in">config</span> as-pect.<span class="hljs-built_in">config</span>.js</code></pre>
				<a href="#comparisons" id="comparisons" style="color: inherit; text-decoration: none;">
					<h2>Comparisons</h2>
				</a>
				<p>There are a set of comparison functions defined in the <code>types/as-pect.d.ts</code> types
					definition. These comparison functions allow you to inspect object and memory
				state.</p>
				<a href="#tobe" id="tobe" style="color: inherit; text-decoration: none;">
					<h3>toBe</h3>
				</a>
				<p>This comparison is used for comparing data using the <code>==</code> operator. In
					AssemblyScript this operator is used for comparing strings, numbers, and exact
				reference equality (or pointer comparison.)</p>
				<p>For example, the following statements are valid <code>toBe</code> assertions:</p>
				<pre><code class="language-ts"><span class="hljs-keyword">let</span> a = <span class="hljs-keyword">new</span> Vec3(<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>);
expect&lt;Vec3&gt;(a).toBe(a);
expect&lt;i32&gt;(<span class="hljs-number">10</span>).toBe(<span class="hljs-number">10</span>);
expect&lt;Vec3&gt;(<span class="hljs-literal">null</span>).toBe(<span class="hljs-literal">null</span>);</code></pre>
				<p>This method is safe to use portably with <code>jest</code>.</p>
				<a href="#tostrictequal" id="tostrictequal" style="color: inherit; text-decoration: none;">
					<h3>toStrictEqual</h3>
				</a>
				<p>This method performs a single <code>memory.compare()</code> on two blocks of data. This is
					useful for references and strings. For example, using a <code>toBe()</code> assertion on
				two different references results in a failed assertion:</p>
				<pre><code class="language-ts"><span class="hljs-keyword">let</span> a = <span class="hljs-keyword">new</span> Vec3(<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>);
<span class="hljs-keyword">let</span> b = <span class="hljs-keyword">new</span> Vec3(<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>);
expect&lt;Vec3&gt;(a).toBe(b); <span class="hljs-comment">// fails!</span></code></pre>
				<p>Instead, it&#39;s posible to compare two different references like this:</p>
				<pre><code class="language-ts">expect&lt;Vec3&gt;(a).toStrictEqual(b); <span class="hljs-comment">// passes!</span></code></pre>
				<p>The following snippet an approximate the JavaScript equivalent for the
				<code>toStrictEqual</code> comparison:</p>
				<pre><code class="language-ts"><span class="hljs-comment">// loop over each property (properties are the same at compile time)</span>
<span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> prop <span class="hljs-keyword">in</span> a) {
  <span class="hljs-keyword">if</span> (a[prop] === b[prop]) {
    <span class="hljs-comment">// exact equality check</span>
    <span class="hljs-keyword">continue</span>;
  } <span class="hljs-keyword">else</span> {
    assert(negated);
  }
}
assert(!negated);</code></pre>
				<p>If the object has child references, like strings or pointers to other blocks
					of memory, the comparison will fail because the pointers are different. This
					happens because <code>as-pect</code> cannot perform object traversal. Instead, a custom
				method should be used to traverse child references to compare equality.</p>
				<p>The <code>toStrictEqual</code> comparison, however, does perform a <code>==</code> comparison before
					opting into using a full memory comparison. If the <code>@operator(&quot;==&quot;)</code> is
					overridden, then it&#39;s possible for two references to be compared using this
				method:</p>
				<pre><code class="language-ts"><span class="hljs-keyword">class</span> Vec3 {
  <span class="hljs-keyword">constructor</span>(<span class="hljs-params"><span class="hljs-keyword">public</span> a: f64 = 0.0, <span class="hljs-keyword">public</span> b: f64 = 0.0, <span class="hljs-keyword">public</span> c: f64 = 0.0</span>) {}

  <span class="hljs-comment">// override the operator</span>
  <span class="hljs-meta">@operator</span>(<span class="hljs-string">"=="</span>)
  <span class="hljs-keyword">protected</span> __equals(ref: Vec3 | <span class="hljs-literal">null</span>): bool {
    <span class="hljs-comment">// === is a strict pointer comparison in AssemblyScript</span>
    <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span> === ref) <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
    <span class="hljs-keyword">if</span> (ref === <span class="hljs-literal">null</span>) <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.a == ref.a &amp;&amp; <span class="hljs-keyword">this</span>.b == ref.b &amp;&amp; <span class="hljs-keyword">this</span>.c == ref.c;
  }
}</code></pre>
				<p>This method is <em>not</em> safe to use portably with <code>jest</code> yet. Once <code>Reflection</code>
					is supported by AssemblyScript, <code>as-pect</code> will support compatibility
				between <code>jest</code>&#39;s version of this function.</p>
				<a href="#toblockequal" id="toblockequal" style="color: inherit; text-decoration: none;">
					<h3>toBlockEqual</h3>
				</a>
				<p>This comparison is the same comparison used on <code>ArrayBuffer</code> and <code>String</code>s.
					It compares the bytes of the heap allocations by obtaining the exact size
					of the block and then performing a memcompare if the <code>actual</code> and <code>expected</code>
				blocks match.</p>
				<p>Only use this comparison when comparing <code>ArrayBuffer</code> references.</p>
				<pre><code class="language-ts"><span class="hljs-keyword">let</span> buffer = <span class="hljs-keyword">new</span> <span class="hljs-built_in">ArrayBuffer</span>(<span class="hljs-number">100</span>); <span class="hljs-comment">// 100 bytes long heap allocation</span>
<span class="hljs-keyword">let</span> buffer2 = <span class="hljs-keyword">new</span> <span class="hljs-built_in">ArrayBuffer</span>(<span class="hljs-number">100</span>); <span class="hljs-comment">// another buffer</span>

expect&lt;<span class="hljs-built_in">ArrayBuffer</span>&gt;(buffer).toBlockEqual(buffer2);</code></pre>
				<a href="#tobetruthy-and-tobefalsy" id="tobetruthy-and-tobefalsy" style="color: inherit; text-decoration: none;">
					<h3>toBeTruthy and toBeFalsy</h3>
				</a>
				<p>These comparisons are used to determine if a value is truthy or falsy in the
				JavaScript sense. In JavaScript there are only six falsy values:</p>
				<ul>
					<li><code>false</code></li>
					<li><code>0</code></li>
					<li><code>&quot;&quot;</code></li>
					<li><code>null</code></li>
					<li><code>undefined</code></li>
					<li><code>NaN</code></li>
				</ul>
				<p>In AssemblyScript, there is no <code>undefined</code>, so <code>as-pect</code> will treat each of
				those values as falsy. Truthy values are anything that is not falsy,</p>
				<pre><code class="language-ts">expect&lt;bool&gt;(<span class="hljs-literal">true</span>).toBeTruthy();
expect&lt;Vec3&gt;(<span class="hljs-keyword">new</span> Vec3(<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>)).toBeTruthy();
expect&lt;i32&gt;(<span class="hljs-number">1</span>).toBeTruthy();
expect&lt;<span class="hljs-built_in">string</span>&gt;(<span class="hljs-string">"Something!"</span>).toBeTruthy();
expect&lt;bool&gt;(<span class="hljs-literal">false</span>).toBeFalsy();
expect&lt;Vec3&gt;(<span class="hljs-literal">null</span>).toBeFalsy();
expect&lt;i32&gt;(<span class="hljs-number">0</span>).toBeFalsy();
expect&lt;f64&gt;(<span class="hljs-literal">NaN</span>).toBeFalsy();
expect&lt;<span class="hljs-built_in">string</span>&gt;(<span class="hljs-string">""</span>).toBeFalsy();</code></pre>
				<p>These methods are safe to use with <code>jest</code>.</p>
				<a href="#tobenan" id="tobenan" style="color: inherit; text-decoration: none;">
					<h3>toBeNaN</h3>
				</a>
				<p>This comparison is only used for float values to determine if the value is a
				<code>NaN</code> value.</p>
				<pre><code class="language-ts">expect&lt;f32&gt;(<span class="hljs-literal">NaN</span>).toBeNaN(); <span class="hljs-comment">// passes</span>
expect&lt;f64&gt;(<span class="hljs-number">1.0</span>).not.toBeNaN(); <span class="hljs-comment">// passes</span>

<span class="hljs-comment">/** This results in a runtime error, despite not being NaN. */</span>
expect&lt;Vec3&gt;(<span class="hljs-keyword">new</span> Vec3()).not.toBeNaN();</code></pre>
				<p>This method is technically safe to use with <code>jest</code> with the assumption
				that <code>as-pect</code> will fail if used with a reference type.</p>
				<a href="#tobenull" id="tobenull" style="color: inherit; text-decoration: none;">
					<h3>toBeNull</h3>
				</a>
				<p>This comparison looks specifically for a <code>null</code> value.</p>
				<pre><code class="language-ts">expect&lt;Vec3&gt;(<span class="hljs-literal">null</span>).toBeNull(); <span class="hljs-comment">// valid assertion</span></code></pre>
				<p>In the case of numeric values, numbers cannot be <code>null</code> in AssemblyScript.
				Thus, the following example will throw a runtime error.</p>
				<pre><code class="language-ts">expect&lt;i32&gt;(<span class="hljs-literal">null</span>).toBeNull();</code></pre>
				<p>This method is safe to use with <code>jest</code> assuming you explicitly return <code>null</code>
				and avoid use of <code>undefined</code> which does not exist in AssemblyScript.</p>
				<a href="#tobefinite" id="tobefinite" style="color: inherit; text-decoration: none;">
					<h3>toBeFinite</h3>
				</a>
				<p>This comparison is used to detect if float values are finite. The following
				values are not finite in JavaScript or AssemblyScript.</p>
				<ul>
					<li><code>Infinity</code></li>
					<li><code>-Infinity</code></li>
					<li><code>NaN</code></li>
				</ul>
				<p>The following assertions are true.</p>
				<pre><code class="language-ts">expect&lt;f64&gt;(<span class="hljs-number">1.0</span>).toBeFinite();
expect&lt;f32&gt;(<span class="hljs-literal">Infinity</span>).not.toBeFinite();
expect&lt;f64&gt;(<span class="hljs-literal">NaN</span>).not.toBeFinite();</code></pre>
				<p>As long as the number values are always <code>f32</code> or <code>f64</code> (or <code>number</code> in
					JavaScript or AssemblyScript,) <code>toBeFinite</code> is a safe assertion to use
				portably with jest.</p>
				<a href="#tothrow" id="tothrow" style="color: inherit; text-decoration: none;">
					<h3>toThrow</h3>
				</a>
				<p>This comparison is used to test and see if a function throws an error. In the
					case of AssemblyScript and <code>as-pect</code>, the function will be called from within
					a JavaScript <code>try</code> block, and if the function throws, the assertion is valid,
				unless it is negated with the <code>not</code> property.</p>
				<pre><code class="language-ts">expect&lt;<span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> <span class="hljs-built_in">void</span>&gt;<span class="hljs-function">(<span class="hljs-params">(<span class="hljs-params"></span>) =&gt; {
  <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">Error</span>(<span class="hljs-params">"Whoops!"</span>);
}</span>).<span class="hljs-params">toThrow</span><span class="hljs-params">()</span>; // <span class="hljs-params">valid</span> <span class="hljs-params">assertion</span>

// <span class="hljs-params">alternative</span> <span class="hljs-params">shorter</span> <span class="hljs-params">convenience</span> <span class="hljs-params">syntax</span>
<span class="hljs-params">expectFn</span>(<span class="hljs-params">(<span class="hljs-params"></span>) =&gt; {
  <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">Error</span>(<span class="hljs-params">"Whoops!"</span>);
}</span>).<span class="hljs-params">toThrow</span><span class="hljs-params">()</span>;</span></code></pre>
				<p>Closure is not supported in AssemblyScript yet. Also, any references that are
					left dangling on the stack will hang around un<code>__release()</code>ed by
				AssemblyScript.</p>
				<p>This function is safe to use with <code>jest</code>.</p>
				<a href="#tobegreaterthan-and-tobelessthan" id="tobegreaterthan-and-tobelessthan" style="color: inherit; text-decoration: none;">
					<h3>toBeGreaterThan and toBeLessThan</h3>
				</a>
				<p>This set of comparisons validate that a value is greater than, less than, or
				equal to another value. The following assertions are true.</p>
				<pre><code class="language-ts">expect&lt;i32&gt;(<span class="hljs-number">100</span>).toBeGreaterThan(<span class="hljs-number">42</span>);
expect&lt;i32&gt;(<span class="hljs-number">0</span>).toBeLessThan(<span class="hljs-number">100</span>);
expect&lt;i32&gt;(<span class="hljs-number">0</span>).not.toBeGreaterThan(<span class="hljs-number">100</span>);
expect&lt;f64&gt;(<span class="hljs-number">1.0</span>).toBeGreaterThanOrEqual(<span class="hljs-number">1.0</span>);
expect&lt;f64&gt;(<span class="hljs-number">1.0</span>).not.toBeLessThanOrEqual(<span class="hljs-number">0</span>);</code></pre>
				<p>These assertions also work with reference types when the
				<code>@operator(&quot;&gt;&quot; | &quot;&lt;&quot; | &quot;&gt;=&quot; | &quot;&lt;=&quot;)</code> is used on a method in the class.</p>
				<pre><code class="language-ts"><span class="hljs-keyword">class</span> Vec3 {
  <span class="hljs-keyword">constructor</span>(<span class="hljs-params"><span class="hljs-keyword">public</span> x: f64 = 0.0, <span class="hljs-keyword">public</span> y: f64 = 0.0, <span class="hljs-keyword">public</span> z: f64 = 0.0</span>) {}

  <span class="hljs-meta">@operator</span>(<span class="hljs-string">"&gt;"</span>)
  <span class="hljs-keyword">protected</span> __gt(other: Vec3): bool {
    <span class="hljs-keyword">return</span> (
      <span class="hljs-keyword">this</span>.x * <span class="hljs-keyword">this</span>.x + <span class="hljs-keyword">this</span>.y * <span class="hljs-keyword">this</span>.y + <span class="hljs-keyword">this</span>.z * <span class="hljs-keyword">this</span>.z &gt;
      other.x * other.x + other.y * other.y + other.z * other.z
    );
  }
}

<span class="hljs-comment">// valid assertion because `@operator` was overloaded</span>
expect&lt;Vec3&gt;(<span class="hljs-keyword">new</span> Vec3(<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>)).toBeGreaterThan(<span class="hljs-keyword">new</span> Vec3(<span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>));</code></pre>
				<p>These methods are safe to use portably with <code>jest</code>, provided they aren&#39;t used
				with reference types.</p>
				<a href="#tobecloseto" id="tobecloseto" style="color: inherit; text-decoration: none;">
					<h3>toBeCloseTo</h3>
				</a>
				<p>When doing floating point math, it&#39;s possible that values will not be exactly as
				expected because of floating point error.</p>
				<pre><code class="language-ts">expect&lt;f64&gt;(<span class="hljs-number">0.1</span> + <span class="hljs-number">0.2</span>).toBe(<span class="hljs-number">0.3</span>); <span class="hljs-comment">// fails</span>

&gt; <span class="hljs-number">0.1</span> + <span class="hljs-number">0.2</span>
<span class="hljs-number">0.30000000000000004</span></code></pre>
				<p>Instead, use <code>expect().toBeCloseTo()</code> to validate an expected floating point
				value.</p>
				<pre><code class="language-ts">expect&lt;f64&gt;(<span class="hljs-number">0.1</span> + <span class="hljs-number">0.2</span>).toBeCloseTo(<span class="hljs-number">0.3</span>); <span class="hljs-comment">// passes!</span></code></pre>
				<p>Reference values and integer values will result in a runtime error, because
				<code>toBeCloseTo</code> comparisons require a floating point number to work.</p>
				<p>This method is safe to use portably with <code>jest</code>.</p>
				<a href="#tohavelength" id="tohavelength" style="color: inherit; text-decoration: none;">
					<h3>toHaveLength</h3>
				</a>
				<p>This comparison verifies the length of a given object. This includes Arrays,
				TypedArrays, ArrayBuffers, and custom classes that have a <code>length</code> property.</p>
				<pre><code class="language-ts"><span class="hljs-keyword">class</span> LengthExample {
  <span class="hljs-keyword">constructor</span>(<span class="hljs-params"><span class="hljs-keyword">public</span> length: i32 = 0</span>) {}
}

<span class="hljs-keyword">const</span> array = <span class="hljs-keyword">new</span> <span class="hljs-built_in">Array</span>&lt;Vec3&gt;(<span class="hljs-number">100</span>);
<span class="hljs-keyword">const</span> typedarray = <span class="hljs-keyword">new</span> <span class="hljs-built_in">Uint8Array</span>(<span class="hljs-number">42</span>);
<span class="hljs-keyword">const</span> buffer = <span class="hljs-keyword">new</span> <span class="hljs-built_in">ArrayBuffer</span>(<span class="hljs-number">29</span>);
<span class="hljs-keyword">const</span> custom = <span class="hljs-keyword">new</span> LengthExample(<span class="hljs-number">50</span>);

expect&lt;<span class="hljs-built_in">Array</span>&lt;Vec3&gt;&gt;(array).toHaveLength(<span class="hljs-number">100</span>);
expect&lt;<span class="hljs-built_in">Uint8Array</span>&gt;(typedarray).toHaveLength(<span class="hljs-number">42</span>);
expect&lt;<span class="hljs-built_in">ArrayBuffer</span>&gt;(buffer).toHaveLength(<span class="hljs-number">29</span>);
expect&lt;LengthExample&gt;(custom).toHaveLength(<span class="hljs-number">50</span>);</code></pre>
				<p>This method is safe to use with <code>jest</code>, with the exception of using
				<code>ArrayBuffer</code>.</p>
				<a href="#tocontain-and-toinclude" id="tocontain-and-toinclude" style="color: inherit; text-decoration: none;">
					<h3>toContain and toInclude</h3>
				</a>
				<p>This comparison is used to determine if an Array contains a value.</p>
				<p>All the values returned by <code>T[index]</code> will be compared using the <code>==</code> operator,
					so overloading the class <code>@operator(&quot;==&quot;)</code> can be used in conjunction with this
					comparison. The <code>index</code> must be a number value, and there must be a <code>length</code>
					property that matches the <code>index</code> type. All values from <code>0</code> to <code>length - 1</code>
				will be checked.</p>
				<pre><code class="language-ts"><span class="hljs-keyword">const</span> data = <span class="hljs-keyword">new</span> <span class="hljs-built_in">Uint8Array</span>(<span class="hljs-number">100</span>);
data[<span class="hljs-number">5</span>] = <span class="hljs-number">255</span>;

expect&lt;<span class="hljs-built_in">Uint8Array</span>&gt;(data).toContain(<span class="hljs-number">255</span>);</code></pre>
				<p>This method is portable with <code>jest</code> using the <code>toContain()</code> method.</p>
				<a href="#tocontainequal-and-toincludeequal" id="tocontainequal-and-toincludeequal" style="color: inherit; text-decoration: none;">
					<h3>toContainEqual and toIncludeEqual</h3>
				</a>
				<p>This comparison is used to determine if an Array contains a reference that
				equals another reference.</p>
				<p>All the values returned by <code>T[index]</code> will be compared using the <code>==</code> operator,
					and if that comparison does not work, a memcompare will be used. Overloading the
					class <code>@operator(&quot;==&quot;)</code> can be used in conjunction with this comparison. The
					<code>index</code> must be a number value, and there must be a <code>length</code> property that
				matches the <code>index</code> type. All values from <code>0</code> to <code>length - 1</code> will be checked.</p>
				<pre><code class="language-ts"><span class="hljs-keyword">const</span> reference = <span class="hljs-keyword">new</span> Vec3(<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>);
<span class="hljs-keyword">const</span> data = <span class="hljs-keyword">new</span> <span class="hljs-built_in">Array</span>&lt;Vec3&gt;(<span class="hljs-number">0</span>);
data.push(<span class="hljs-keyword">new</span> Vec(<span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>));
data.push(<span class="hljs-keyword">new</span> Vec(<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>));
data.push(<span class="hljs-keyword">new</span> Vec(<span class="hljs-number">4</span>, <span class="hljs-number">5</span>, <span class="hljs-number">6</span>));

expect&lt;<span class="hljs-built_in">Uint8Array</span>&gt;(data).toContainEqual(referece);</code></pre>
				<p>This method is portable with <code>jest</code> using the <code>toContainEqual()</code> method.</p>
				<!-- markdownlint-enable MD013 MD031 -->
				<a href="#configuration-file" id="configuration-file" style="color: inherit; text-decoration: none;">
					<h2>Configuration File</h2>
				</a>
				<p>Currently <code>as-pect</code> will compile each file that matches the
					<a href="https://en.wikipedia.org/wiki/Glob_%28programming%29"><code>glob</code></a>s in the
					<code>include</code> property of your configuration. The default include is
					<code>&quot;assembly/__tests__/**/*.spec.ts&quot;</code>. It must compile each file, and run each
					binary separately inside it&#39;s own <code>TestContext</code>. This is a limitation of
				AssemblyScript, not of <code>as-pect</code>.</p>
				<p>A typical configuration is provided when you use <code>asp --init</code> and is located
				<a href="blob/master/init/as-pect.config.js">here</a>.</p>
				<a href="#types-and-tooling" id="types-and-tooling" style="color: inherit; text-decoration: none;">
					<h2>Types And Tooling</h2>
				</a>
				<p>The <code>as-pect</code> cli comes with a way to generate the types for all the globals
					used by the framework. Simply use the <code>--init</code> or <code>--types</code> flag. When a new
					version of <code>as-pect</code> is released, simply run the <code>npx asp --types</code> command to
					get the latest version of these function definitions. This will greatly
					increase your productivity because it comes with lots of documentation, and
				adds a lot of intellisense to your development experience.</p>
				<p>It is also possible to reference the types manually. Use the following
					reference at the top of your <code>assembly/index.ts</code> file to include these types
					in your project automatically. If you use this method for your types, feel
				free to delete the auto-generated types file in your test folder.</p>
				<pre><code class="language-ts"><span class="hljs-comment">/// &lt;reference path="../node_modules/@as-pect/core/types/as-pect.d.ts" /&gt;</span>
<span class="hljs-comment">/// &lt;reference path="../node_modules/@as-pect/core/types/as-pect.portable.d.ts" /&gt;</span></code></pre>
				<a href="#ci-usage" id="ci-usage" style="color: inherit; text-decoration: none;">
					<h2>CI Usage</h2>
				</a>
				<p>If any module fails during compilation, the utility will exit immediately with
				code 1 so it can be used for quicker ci builds.</p>
				<p>Adding this line to your <code>.travis.yml</code> will allow you to specify a custom
				script to your CI build.</p>
				<pre><code class="language-yaml"><span class="hljs-attr">script:</span>
  <span class="hljs-bullet">-</span> <span class="hljs-string">npm</span> <span class="hljs-string">run</span> <span class="hljs-string">test:ci</span></code></pre>
				<p>Then in your package.json file, you can instruct the <code>&quot;test:ci&quot;</code> script to
				run the <code>asp</code> command line tool to use the <code>SummaryTestReporter</code> like this:</p>
				<pre><code class="language-json">{
  <span class="hljs-attr">"scripts"</span>: {
    <span class="hljs-attr">"test:ci"</span>: <span class="hljs-string">"asp --summary"</span>
  }
}</code></pre>
				<a href="#assemblyscript-compiler-options" id="assemblyscript-compiler-options" style="color: inherit; text-decoration: none;">
					<h2>AssemblyScript Compiler Options</h2>
				</a>
				<a href="#code--compilercode-cli-argument" id="code--compilercode-cli-argument" style="color: inherit; text-decoration: none;">
					<h3><code>--compiler</code> CLI Argument</h3>
				</a>
				<p>By default <code>as-pect</code> will use node&#39;s resolver to look for an AssemblyScript
					module. If you want to specify a different version of the compiler, use
					<code>--compiler ../relative/path/to/compiler/folder</code>. Note that it expects the following
					to be the same <code>__folder__/dist/asc.js</code>, <code>__folder__/cli/util/options.js</code>, and
				<code>__folder__/lib/loader.js</code>.</p>
				<a href="#compiler-flags" id="compiler-flags" style="color: inherit; text-decoration: none;">
					<h3>Compiler Flags</h3>
				</a>
				<p>Regardless of the installed version, all the compiler flags will be passed to
				the <code>asc</code> command line tool.</p>
				<pre><code class="language-ts"><span class="hljs-keyword">const</span> compiler = <span class="hljs-built_in">require</span>(path.join(path.cwd(), options.compiler, <span class="hljs-string">"cli/asc"</span>));</code></pre>
				<p>Inside the callback, any files that are generated, except for the <code>.wasm</code> file
					will be output using the <code>{testFolder}/{testName}.{ext}</code> format. This includes
				source maps, <code>.wat</code> files, <code>.js</code> files, and types files generated by the compiler.</p>
				<a href="#reporters" id="reporters" style="color: inherit; text-decoration: none;">
					<h2>Reporters</h2>
				</a>
				<p>Reporters are the way tests get reported. When running the CLI, the
					<code>SummaryReporter</code> is used and all the values will be logged to the console. The
					test suite itself does not log out test results. If you want to use a custom
				reporter, you can create your own by extending the abstract <code>Reporter</code> class.</p>
				<pre><code class="language-ts"><span class="hljs-keyword">export</span> <span class="hljs-keyword">abstract</span> <span class="hljs-keyword">class</span> Reporter {
  <span class="hljs-keyword">public</span> <span class="hljs-keyword">abstract</span> onStart(suite: TestSuite): <span class="hljs-built_in">void</span>;
  <span class="hljs-keyword">public</span> <span class="hljs-keyword">abstract</span> onGroupStart(group: TestGroup): <span class="hljs-built_in">void</span>;
  <span class="hljs-keyword">public</span> <span class="hljs-keyword">abstract</span> onGroupFinish(group: TestGroup): <span class="hljs-built_in">void</span>;
  <span class="hljs-keyword">public</span> <span class="hljs-keyword">abstract</span> onTestStart(group: TestGroup, result: TestResult): <span class="hljs-built_in">void</span>;
  <span class="hljs-keyword">public</span> <span class="hljs-keyword">abstract</span> onTestFinish(group: TestGroup, result: TestResult): <span class="hljs-built_in">void</span>;
  <span class="hljs-keyword">public</span> <span class="hljs-keyword">abstract</span> onFinish(suite: TestSuite): <span class="hljs-built_in">void</span>;
  <span class="hljs-keyword">public</span> <span class="hljs-keyword">abstract</span> onTodo(group: TestGroup, todo: <span class="hljs-built_in">string</span>): <span class="hljs-built_in">void</span>;
}</code></pre>
				<p>Each test suite run will use the provided reporter and call
					<code>onStart(suite: TestSuite)</code> to notify a consumer that a test has started. This
					happens once per test file. Since a file can have multiple <code>describe</code> function
					calls, these are logically placed into <code>TestGroup</code>s. Each <code>TestGroup</code> has it&#39;s
				own description and contains a list of <code>TestResult</code>s that were run.</p>
				<p>If no reporter is provided to the configuration, one will be provided that uses
				<code>stdout</code> and <code>chalk</code> to provide colored output.</p>
				<p>If performance is enabled, then the <code>times</code> array will be populated with the
				runtime values measured in milliseconds.</p>
				<a href="#summaryreporter" id="summaryreporter" style="color: inherit; text-decoration: none;">
					<h3>SummaryReporter</h3>
				</a>
				<p>This reporter only outputs failed tests and is the default <code>TestReporter</code> used
				by the <code>as-pect</code> cli. It can be used directly from the configuration file.</p>
				<pre><code class="language-ts"><span class="hljs-keyword">const</span> { SummaryReporter } = <span class="hljs-built_in">require</span>(<span class="hljs-string">"@as-pect/core"</span>);

<span class="hljs-comment">// export your configuration</span>
<span class="hljs-built_in">module</span>.exports = {
  reporter: <span class="hljs-keyword">new</span> SummaryReporter({
    <span class="hljs-comment">// enableLogging: false, // disable logging</span>
  }),
};</code></pre>
				<p>It can also be used from the cli using the <code>--summary</code> flag.</p>
				<pre><code>npx asp <span class="hljs-comment">--summary</span>
npx asp <span class="hljs-comment">--summary=enableLogging=false</span></code></pre><p>Note: When using parameters for the builtin reporters, the <code>=</code> is required to
				parse the querystring parameters correctly.</p>
				<a href="#verbosereporter" id="verbosereporter" style="color: inherit; text-decoration: none;">
					<h3>VerboseReporter</h3>
				</a>
				<p>This reporter outputs a lot of information, including:</p>
				<ul>
					<li>All Test Groups and Test Names for each test</li>
					<li>RTrace Info (reference allocations vs deallocations)</li>
					<li>Performance Statistics</li>
					<li>Logging Information</li>
				</ul>
				<p>It can be used directly from the configuration file.</p>
				<pre><code class="language-ts"><span class="hljs-keyword">const</span> { VerboseReporter } = <span class="hljs-built_in">require</span>(<span class="hljs-string">"@as-pect/core"</span>);

<span class="hljs-built_in">module</span>.exports = {
  reporter: <span class="hljs-keyword">new</span> VerboseReporter(),
};</code></pre>
				<p>It can also be used from the cli using the <code>--verbose</code> flag.</p>
				<pre><code>npx asp <span class="hljs-comment">--verbose</span></code></pre>
				<a href="#jsonreporter" id="jsonreporter" style="color: inherit; text-decoration: none;">
					<h3>JSONReporter</h3>
				</a>
				<p>The <code>JSONReporter</code> can be used to create <code>json</code> files that contain the test
					output. The file output location is <code>{testname}.spec.json</code>. It can be used
				directly from the configuration file.</p>
				<pre><code class="language-ts"><span class="hljs-comment">// as-pect.config.js</span>
<span class="hljs-keyword">const</span> { JSONReporter } = <span class="hljs-built_in">require</span>(<span class="hljs-string">"@as-pect/core"</span>);

<span class="hljs-comment">// export your configuration</span>
<span class="hljs-built_in">module</span>.exports = {
  reporter: <span class="hljs-keyword">new</span> JSONReporter(),
};</code></pre>
				<p>It can also be used from the cli using the <code>--json</code> flag.</p>
				<pre><code>npx asp <span class="hljs-comment">--json</span></code></pre><p>The object ouput definition is shaped like this:</p>
				<pre><code class="language-ts"><span class="hljs-comment">// Test Results are compiled into an array</span>
[
  <span class="hljs-comment">// For each test, there is an object with the following shape</span>
  {
    <span class="hljs-comment">// The Test Group</span>
    group: group.name,
    <span class="hljs-comment">// The Test Name</span>
    name: result.name,
    <span class="hljs-comment">// If it ran</span>
    ran: result.ran,
    <span class="hljs-comment">// If it passed</span>
    pass: result.pass,
    <span class="hljs-comment">// The total test runtime</span>
    runtime: result.runTime,
    <span class="hljs-comment">// The error message</span>
    message: result.message,
    <span class="hljs-comment">// Actual value message if an expectation failed</span>
    actual: result.actual ? result.actual.message : <span class="hljs-literal">null</span>,
    <span class="hljs-comment">// Expected value message if an expectation failed</span>
    expected: result.expected ? result.expected.message : <span class="hljs-literal">null</span>,
    <span class="hljs-comment">// The average run time (performance)</span>
    average: result.average,
    <span class="hljs-comment">// The median run time (performance)</span>
    median: result.median,
    <span class="hljs-comment">// The maximum run time (performance)</span>
    max: result.max,
    <span class="hljs-comment">// The minimum run time (performance)</span>
    min: result.min,
    <span class="hljs-comment">// The standard deviation of the run times (performance)</span>
    stdDev: result.stdDev,
    <span class="hljs-comment">// The variance of the run times (performance)</span>
    variance: result.variance,
  },
];</code></pre>
				<a href="#csvreporter" id="csvreporter" style="color: inherit; text-decoration: none;">
					<h3>CSVReporter</h3>
				</a>
				<p>The <code>CSVReporter</code> can be used to create <code>csv</code> files that contain the test
					output. The file output location is <code>{testname}.spec.csv</code>. It can be used
				directly from the configuration file.</p>
				<pre><code class="language-ts"><span class="hljs-keyword">const</span> { CSVReporter } = <span class="hljs-built_in">require</span>(<span class="hljs-string">"@as-pect/core"</span>);

<span class="hljs-comment">// export your configuration</span>
<span class="hljs-built_in">module</span>.exports = {
  reporter: <span class="hljs-keyword">new</span> CSVReporter(),
};</code></pre>
				<p>It can also be used from the cli using the <code>--csv</code> flag.</p>
				<pre><code>npx asp <span class="hljs-comment">--csv</span></code></pre><p>This is a list of all the columns in the exported csv file.</p>
				<pre><code class="language-ts"><span class="hljs-keyword">const</span> csvColumns = [
  <span class="hljs-string">"Group"</span>, <span class="hljs-comment">// The Test Group</span>
  <span class="hljs-string">"Name"</span>, <span class="hljs-comment">// The Test Name</span>
  <span class="hljs-string">"Ran"</span>, <span class="hljs-comment">// If it ran</span>
  <span class="hljs-string">"Pass"</span>, <span class="hljs-comment">// If it passed</span>
  <span class="hljs-string">"Runtime"</span>, <span class="hljs-comment">// The total test runtim</span>
  <span class="hljs-string">"Message"</span>, <span class="hljs-comment">// The error message</span>
  <span class="hljs-string">"Actual"</span>, <span class="hljs-comment">// Actual value message if an expectation failed</span>
  <span class="hljs-string">"Expected"</span>, <span class="hljs-comment">// Expected value message if an expectation failed</span>
  <span class="hljs-string">"Average"</span>, <span class="hljs-comment">// The average run time (performance)</span>
  <span class="hljs-string">"Median"</span>, <span class="hljs-comment">// The median run time (performance)</span>
  <span class="hljs-string">"Max"</span>, <span class="hljs-comment">// The maximum run time (performance)</span>
  <span class="hljs-string">"Min"</span>, <span class="hljs-comment">// The minimum run time (performance)</span>
  <span class="hljs-string">"StdDev"</span>, <span class="hljs-comment">// The standard deviation of the run times (performance)</span>
  <span class="hljs-string">"Variance"</span>, <span class="hljs-comment">// The variance of the run times (performance)</span>
];</code></pre>
				<a href="#portability" id="portability" style="color: inherit; text-decoration: none;">
					<h2>Portability</h2>
				</a>
				<p>It is possible to write <code>as-pect</code> tests that run in <code>jest</code> as well. The
					compatible functions are documented in the
					<code>@as-pect/core/types/as-pect.portable.d.ts</code> file and can be added to your
					project by using the <code>--portable</code> flag. Instead of using the types provided by
					<code>@types/jest</code>, use the portable ones provided by <code>as-pect</code>. This is the
				recommended way to setup testing when trying to write portable tests.</p>
				<pre><code>npm install --save-dev jest <span class="hljs-meta">@as</span>-pect<span class="hljs-regexp">/cli typescript assemblyscript/</span>assemblyscript
npx ts-jest <span class="hljs-string">config:</span>init
npx asp --portable</code></pre><p>Then change the jest configuration to match these properties as you see fit:</p>
				<pre><code class="language-js"><span class="hljs-built_in">module</span>.exports = {
  <span class="hljs-attr">preset</span>: <span class="hljs-string">"ts-jest"</span>,
  <span class="hljs-attr">testEnvironment</span>: <span class="hljs-string">"node"</span>,
  <span class="hljs-attr">testMatch</span>: [<span class="hljs-string">"assembly/__tests__/**/*.spec.ts"</span>],
};</code></pre>
				<p>This is the compatibility table.</p>
				<a href="#rtrace-and-memory-leaks" id="rtrace-and-memory-leaks" style="color: inherit; text-decoration: none;">
					<h2>RTrace and Memory Leaks</h2>
				</a>
				<p>If an expectation fails and hits an <code>unreachable()</code> instruction, any unreleased
					references in the function call stack will be held indefinitely as a memory
					leak. Test Suites don&#39;t stop running if they fail the test callback. However,
					tests will stop if they fail inside the <code>beforeEach()</code>, <code>beforeAll()</code>,
				<code>afterEach()</code>, and <code>afterAll()</code> callbacks.</p>
				<p>Typically, a <code>throws()</code> test will leave at <em>least</em> a single <code>Expectation</code> on the
					heap. This is to be expected, because the <code>unreachable()</code> instruction unwinds
					the stack, and prevents the ability for each function to <code>__release</code> a reference
				pointer properly. Your test suite output may look like this:</p>
				<pre><code>[<span class="hljs-keyword">Describe</span>]: toHaveLength TypedArray <span class="hljs-keyword">type</span>: Uint32Array

 [<span class="hljs-keyword">Success</span>]: ✔ should assert expected <span class="hljs-keyword">length</span>
  [Throws]: ✔ <span class="hljs-keyword">when</span> expected <span class="hljs-keyword">length</span> should <span class="hljs-keyword">not</span> equal the same <span class="hljs-keyword">value</span> RTrace: +<span class="hljs-number">3</span>
 [<span class="hljs-keyword">Success</span>]: ✔ should <span class="hljs-keyword">verify</span> the <span class="hljs-keyword">length</span> <span class="hljs-keyword">is</span> <span class="hljs-keyword">not</span> another <span class="hljs-keyword">value</span>
  [Throws]: ✔ <span class="hljs-keyword">when</span> the <span class="hljs-keyword">length</span> <span class="hljs-keyword">is</span> another expected <span class="hljs-keyword">value</span> RTrace: +<span class="hljs-number">3</span></code></pre><p>The <code>RTrace: +3</code> corresponds to an <code>Expectation</code>, a <code>Uint32Array</code>, and a single
					backing <code>ArrayBuffer</code> that was left on the heap because of the fact that the
					expectation failed. This was expected because these two tests were annotated
					with the <code>throws(desc, callback)</code> function. If you see a function that is
					expected to <code>pass</code> and <code>RTrace</code> returns a very large value, it might be an
					indicator of a very serious memory leak, and the <code>DefaultTestReporter</code> can be
				your best friend when it comes to finding these sorts of problems.</p>
				<p>Among other solutions, the following methods are exposed to you as a way to
					inspect how many allocations and frees occurred during the course of function
					execution. Every one of these functions exist in the <code>RTrace</code> namespace and will
					call into JavaScript to query the state of the heap relative to the overall test
				file, the test group, and each individual test depending on the function.</p>
				<p>This can be disabled with the <code>--nortrace</code> cli option.</p>
				<a href="#performance-testing" id="performance-testing" style="color: inherit; text-decoration: none;">
					<h2>Performance Testing</h2>
				</a>
				<p>To increase performance on testing, do not use the <code>log()</code> function and reduce
					the amount of IO that <code>as-pect</code> must do to compile your tests. The biggest
					bottleneck in Web Assembly testing, is compilation. This means that using
					things like <code>@inline</code> many times will cause your module to compile more slowly,
				and as a result the testing file will run slower.</p>
				<p>Providing these values inside an <code>as-pect.config.js</code> configuration will set
				these as <em>the</em> global defaults.</p>
				<p>Note that when using the <code>cli</code>, the cli flag inputs will override the
				<code>as-pect.config.js</code> configured values.</p>
				<pre><code class="language-js"><span class="hljs-comment">// in as-pect.config.js</span>
<span class="hljs-built_in">module</span>.exports = {
  <span class="hljs-attr">performance</span>: {
    <span class="hljs-comment">/** Enable performance statistics gathering for *every* test. */</span>
    <span class="hljs-attr">enabled</span>: <span class="hljs-literal">false</span>,
    <span class="hljs-comment">/** Set the maximum number of samples to run for every test. */</span>
    <span class="hljs-attr">maxSamples</span>: <span class="hljs-number">10000</span>,
    <span class="hljs-comment">/** Set the maximum test run time in milliseconds for every test. */</span>
    <span class="hljs-attr">maxTestRunTime</span>: <span class="hljs-number">2000</span>,
    <span class="hljs-comment">/** Report the median time in the default reporter for every test. */</span>
    <span class="hljs-attr">reportMedian</span>: <span class="hljs-literal">true</span>,
    <span class="hljs-comment">/** Report the average time in milliseconds for every test. */</span>
    <span class="hljs-attr">reportAverage</span>: <span class="hljs-literal">true</span>,
    <span class="hljs-comment">/** Report the standard deviation for every test. */</span>
    <span class="hljs-attr">reportStandardDeviation</span>: <span class="hljs-literal">false</span>,
    <span class="hljs-comment">/** Report the maximum run time in milliseconds for every test. */</span>
    <span class="hljs-attr">reportMax</span>: <span class="hljs-literal">false</span>,
    <span class="hljs-comment">/** Report the minimum run time in milliseconds for every test. */</span>
    <span class="hljs-attr">reportMin</span>: <span class="hljs-literal">false</span>,
  },
};</code></pre>
				<a href="#custom-imports-using-cli" id="custom-imports-using-cli" style="color: inherit; text-decoration: none;">
					<h2>Custom Imports Using CLI</h2>
				</a>
				<p>If a set of custom imports are required for your test module, it&#39;s possible to
				provide a set of imports for a given test file.</p>
				<p>If your test is located at <code>assembly/__tests__/customImports.spec.ts</code>, then use
					filename <code>assembly/__tests__/customImports.spec.imports.js</code> to export the test
					module&#39;s imports. This file will be required by the cli before the module is
				instantiated.</p>
				<p><em><strong>IMPORTANT</strong>: THIS WILL IGNORE <code>as-pect.config.js</code>&#39;S IMPORTS COMPLETELY</em></p>
				<p>Please see the provided example located in <code>assembly/__tests__/customImports.spec.ts</code>.</p>
				<a href="#using-as-pect-as-a-package" id="using-as-pect-as-a-package" style="color: inherit; text-decoration: none;">
					<h2>Using as-pect as a Package</h2>
				</a>
				<p>It&#39;s possible that running your tests requires a browser environment. Instead
					of running <code>as-pect</code> from the command line, use the <code>--output-binary</code> flag
					along with the <code>--norun</code> flag and this will cause <code>as-pect</code> to output the
					<code>*.spec.wasm</code> file. This binary can be <code>fetch()</code>ed and instantiate like the
				following example.</p>
				<pre><code class="language-ts"><span class="hljs-comment">// browser-test.ts</span>
<span class="hljs-keyword">import</span> { instantiateBuffer } <span class="hljs-keyword">from</span> <span class="hljs-string">"assemblyscript/lib/loader"</span>;
<span class="hljs-keyword">import</span> {
  TestContext,
  IPerformanceConfiguration,
  IAspectExports,
  <span class="hljs-comment">// EmptyReporter,</span>
} <span class="hljs-keyword">from</span> <span class="hljs-string">"as-pect"</span>;

<span class="hljs-keyword">const</span> performanceConfiguration: IPerformanceConfiguration = {
  <span class="hljs-comment">// put performance configuration values here</span>
};

<span class="hljs-comment">// Create a TestContext</span>
<span class="hljs-keyword">const</span> runner = <span class="hljs-keyword">new</span> TestContext({
  <span class="hljs-comment">// reporter: new EmptyReporter(), // Use this to override default test reporting</span>
  performanceConfiguration,
  <span class="hljs-comment">// testRegex: /.*/, // Use this to run only tests that match this regex</span>
  <span class="hljs-comment">// groupRegex: /.*/, // Use this to run only groups that match this regex</span>
  fileName: <span class="hljs-string">"./test.spec.ts"</span>, <span class="hljs-comment">// Always set the filename</span>
});

<span class="hljs-comment">// put your assemblyscript imports here</span>
<span class="hljs-keyword">const</span> imports = runner.createImports({});

<span class="hljs-comment">// instantiate your test module here via the "assemblyscript/lib/loader" module</span>
<span class="hljs-keyword">const</span> wasm = instantiateStreaming&lt;IAspectExports&gt;(
  fetch(<span class="hljs-string">"./test.spec.wasm"</span>),
  imports,
);

runner.run(wasm); <span class="hljs-comment">// run the tests synchronously</span>

<span class="hljs-comment">// loop over each group and test in that group</span>
<span class="hljs-keyword">for</span> (<span class="hljs-keyword">const</span> group of runner.testGroups) {
  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">const</span> test of group.tests) {
    <span class="hljs-built_in">console</span>.log(test.name, test.pass ? <span class="hljs-string">"pass"</span> : <span class="hljs-string">"fail"</span>);
  }
}</code></pre>
				<p>If you want to compile each test suite manually, it&#39;s possible to use the <code>asc</code>
				compiler yourself by including the following file in your compilation.</p>
				<pre><code>.<span class="hljs-regexp">/node_modules/</span><span class="hljs-keyword">as</span>-pect<span class="hljs-regexp">/assembly/</span>index.ts</code></pre><p>By default, <code>as-pect</code> always shows the generated compiler flags.</p>
				<a href="#contributors" id="contributors" style="color: inherit; text-decoration: none;">
					<h2>Contributors</h2>
				</a>
				<p>To contribute please see <a href="./CONTRIBUTING.md">CONTRIBUTING.md</a>.</p>
				<p>Thanks to <a href="github.com/willemneal">@willemneal</a> and
					<a href="github.com/maxgraey">@MaxGraey</a> for all their support in making <code>as-pect</code> the
				best software it can be.</p>
				<p>Other Contributors:</p>
				<ul>
					<li><a href="github.com/trusktr">@trusktr</a> - Documentation Changes</li>
					<li><a href="github.com/maxgraey">@MaxGraey</a> - Performance API suggestions</li>
					<li><a href="github.com/torch2424">@torch2424</a> - Documentation Changes</li>
					<li><a href="github.com/torch2424">@dcodeio</a> - Made AssemblyScript itself!</li>
				</ul>
				<a href="#special-thanks" id="special-thanks" style="color: inherit; text-decoration: none;">
					<h2>Special Thanks</h2>
				</a>
				<p>Special thanks to the <a href="github.com/AssemblyScript/assemblyscript">AssemblyScript</a>
				team for creating AssemblyScript itself.</p>
			</div>
		</div>
		<div class="col-4 col-menu menu-sticky-wrap menu-highlight">
			<nav class="tsd-navigation primary">
				<ul>
					<li class="globals  ">
						<a href="globals.html"><em>Globals</em></a>
					</li>
					<li class=" tsd-kind-module">
						<a href="modules/_as_pect_assembly.html">@as-<wbr>pect/assembly</a>
					</li>
					<li class=" tsd-kind-module">
						<a href="modules/_as_pect_cli.html">@as-<wbr>pect/cli</a>
					</li>
					<li class=" tsd-kind-module">
						<a href="modules/_as_pect_core.html">@as-<wbr>pect/core</a>
					</li>
				</ul>
			</nav>
			<nav class="tsd-navigation secondary menu-sticky">
				<ul class="before-current">
				</ul>
			</nav>
		</div>
	</div>
</div>
<footer class="with-border-bottom">
	<div class="container">
		<h2>Legend</h2>
		<div class="tsd-legend-group">
			<ul class="tsd-legend">
				<li class="tsd-kind-module"><span class="tsd-kind-icon">Module</span></li>
				<li class="tsd-kind-object-literal"><span class="tsd-kind-icon">Object literal</span></li>
				<li class="tsd-kind-variable"><span class="tsd-kind-icon">Variable</span></li>
				<li class="tsd-kind-function"><span class="tsd-kind-icon">Function</span></li>
				<li class="tsd-kind-function tsd-has-type-parameter"><span class="tsd-kind-icon">Function with type parameter</span></li>
				<li class="tsd-kind-index-signature"><span class="tsd-kind-icon">Index signature</span></li>
				<li class="tsd-kind-type-alias"><span class="tsd-kind-icon">Type alias</span></li>
				<li class="tsd-kind-type-alias tsd-has-type-parameter"><span class="tsd-kind-icon">Type alias with type parameter</span></li>
			</ul>
			<ul class="tsd-legend">
				<li class="tsd-kind-enum"><span class="tsd-kind-icon">Enumeration</span></li>
				<li class="tsd-kind-enum-member"><span class="tsd-kind-icon">Enumeration member</span></li>
				<li class="tsd-kind-property tsd-parent-kind-enum"><span class="tsd-kind-icon">Property</span></li>
				<li class="tsd-kind-method tsd-parent-kind-enum"><span class="tsd-kind-icon">Method</span></li>
			</ul>
			<ul class="tsd-legend">
				<li class="tsd-kind-interface"><span class="tsd-kind-icon">Interface</span></li>
				<li class="tsd-kind-interface tsd-has-type-parameter"><span class="tsd-kind-icon">Interface with type parameter</span></li>
				<li class="tsd-kind-constructor tsd-parent-kind-interface"><span class="tsd-kind-icon">Constructor</span></li>
				<li class="tsd-kind-property tsd-parent-kind-interface"><span class="tsd-kind-icon">Property</span></li>
				<li class="tsd-kind-method tsd-parent-kind-interface"><span class="tsd-kind-icon">Method</span></li>
				<li class="tsd-kind-index-signature tsd-parent-kind-interface"><span class="tsd-kind-icon">Index signature</span></li>
			</ul>
			<ul class="tsd-legend">
				<li class="tsd-kind-class"><span class="tsd-kind-icon">Class</span></li>
				<li class="tsd-kind-class tsd-has-type-parameter"><span class="tsd-kind-icon">Class with type parameter</span></li>
				<li class="tsd-kind-constructor tsd-parent-kind-class"><span class="tsd-kind-icon">Constructor</span></li>
				<li class="tsd-kind-property tsd-parent-kind-class"><span class="tsd-kind-icon">Property</span></li>
				<li class="tsd-kind-method tsd-parent-kind-class"><span class="tsd-kind-icon">Method</span></li>
				<li class="tsd-kind-accessor tsd-parent-kind-class"><span class="tsd-kind-icon">Accessor</span></li>
				<li class="tsd-kind-index-signature tsd-parent-kind-class"><span class="tsd-kind-icon">Index signature</span></li>
			</ul>
			<ul class="tsd-legend">
				<li class="tsd-kind-constructor tsd-parent-kind-class tsd-is-inherited"><span class="tsd-kind-icon">Inherited constructor</span></li>
				<li class="tsd-kind-property tsd-parent-kind-class tsd-is-inherited"><span class="tsd-kind-icon">Inherited property</span></li>
				<li class="tsd-kind-method tsd-parent-kind-class tsd-is-inherited"><span class="tsd-kind-icon">Inherited method</span></li>
				<li class="tsd-kind-accessor tsd-parent-kind-class tsd-is-inherited"><span class="tsd-kind-icon">Inherited accessor</span></li>
			</ul>
			<ul class="tsd-legend">
				<li class="tsd-kind-property tsd-parent-kind-class tsd-is-protected"><span class="tsd-kind-icon">Protected property</span></li>
				<li class="tsd-kind-method tsd-parent-kind-class tsd-is-protected"><span class="tsd-kind-icon">Protected method</span></li>
				<li class="tsd-kind-accessor tsd-parent-kind-class tsd-is-protected"><span class="tsd-kind-icon">Protected accessor</span></li>
			</ul>
			<ul class="tsd-legend">
				<li class="tsd-kind-property tsd-parent-kind-class tsd-is-private"><span class="tsd-kind-icon">Private property</span></li>
				<li class="tsd-kind-method tsd-parent-kind-class tsd-is-private"><span class="tsd-kind-icon">Private method</span></li>
				<li class="tsd-kind-accessor tsd-parent-kind-class tsd-is-private"><span class="tsd-kind-icon">Private accessor</span></li>
			</ul>
			<ul class="tsd-legend">
				<li class="tsd-kind-property tsd-parent-kind-class tsd-is-static"><span class="tsd-kind-icon">Static property</span></li>
				<li class="tsd-kind-call-signature tsd-parent-kind-class tsd-is-static"><span class="tsd-kind-icon">Static method</span></li>
			</ul>
		</div>
	</div>
</footer>
<div class="container tsd-generator">
	<p>Generated using <a href="https://typedoc.org/" target="_blank">TypeDoc</a></p>
</div>
<div class="overlay"></div>
<script src="assets/js/main.js"></script>
<script>if (location.protocol == 'file:') document.write('<script src="assets/js/search.js"><' + '/script>');</script>
</body>
</html>